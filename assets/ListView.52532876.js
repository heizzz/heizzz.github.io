import{_ as y}from"./DiffListItem.50198d85.js";import{_,u as n,r as f,o,c as l,a as g,b as r,d as s,F as u,e as h,t as b}from"./index.72084a3a.js";import{B as m}from"./backend.aee7b34f.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";const L={components:{DiffListItem:y,MessageBox:_},data(){return{songList:null,language:1,loading:!0,loadingMore:!0,remainingItems:0,diffNames:["EASY","NORMAL","HARD","EXPERT","SPECIAL"],nextPage:0,items:[],message:n().message}},created(){n().setMessage(null),this.fetchData()},methods:{fetchData(){this.loading=!0,m.getSongList().then(a=>{this.songList=a,this.loading=!1,this.loadMore()})},loadMore(){this.loadingMore=!0,m.getTierList(this.nextPage).then(a=>{if(a.success)a.data.songs.forEach(i=>{this.items.push({songId:i.id,difficultyId:i.difficulty,globalRating:i.global_rating,myRating:i.my_rating})}),this.nextPage+=1,this.loadingMore=!1,this.remainingItems=a.data.paging.totalItem-(a.data.paging.page+1)*a.data.paging.itemPerPage;else{n().setMessage(a.errors),this.$router.push("/");return}})}}},M={class:"container px-4 py-6 mx-auto"},k={key:1,class:"max-w-4xl mx-auto bg-slate-800 py-4 px-8 rounded space-y-4"},R=s("div",{class:"text-center text-2xl font-semibold"},"Song List",-1),v={class:"table border-collapse text-center mx-auto border border-slate-500"},B=s("thead",{class:"bg-slate-600"},[s("tr",null,[s("th",{scope:"col",class:"px-4 py-2 text-left"},"Rank"),s("th",{scope:"col",class:"px-4 py-2 text-left w-full"},"Title"),s("th",{scope:"col",class:"px-4 py-2",title:"Official difficulty rating"},"R"),s("th",{scope:"col",class:"px-4 py-2",title:"Global average difficulty rating"},"GR"),s("th",{scope:"col",class:"px-4 py-2",title:"My difficulty rating"},"MR")])],-1);function w(a,i,D,P,e,c){const d=f("MessageBox"),p=f("DiffListItem");return o(),l("div",M,[e.loading?(o(),g(d,{key:0,message:"Loading song data...",class:"max-w-2xl mx-auto"},null,8,["message"])):r("",!0),e.loading?r("",!0):(o(),l("div",k,[R,s("table",v,[B,s("tbody",null,[(o(!0),l(u,null,h(e.items,(t,x)=>(o(),g(p,{songTitle:e.songList[t.songId].title[e.language]||e.songList[t.songId].title[0],songId:t.songId,difficultyLevel:e.songList[t.songId].difficulties[t.difficultyId],difficultyId:t.difficultyId,globalRating:t.globalRating,myRating:t.myRating,rank:x+1},null,8,["songTitle","songId","difficultyLevel","difficultyId","globalRating","myRating","rank"]))),256))])]),e.loadingMore?(o(),g(d,{key:0,message:"Loading data...",class:"max-w-xl mx-auto"},null,8,["message"])):(o(),l(u,{key:1},[e.remainingItems>0?(o(),l("button",{key:0,onClick:i[0]||(i[0]=(...t)=>c.loadMore&&c.loadMore(...t)),class:"block w-full max-w-xl mx-auto px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 border border-slate-500 focus:ring-sky-500 focus:ring-1"},"Load more ("+b(e.remainingItems)+")",1)):r("",!0)],64))]))])}var C=I(L,[["render",w]]);export{C as default};
