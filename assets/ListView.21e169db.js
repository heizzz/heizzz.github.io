import{_}from"./DiffListItem.5e414bad.js";import{_ as y,u as l,r as f,o as i,c as n,a as r,b as g,d as s,F as u,e as h,t as I}from"./index.47e535b2.js";import{B as m}from"./backend.9f2e7ca8.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";const L={components:{DiffListItem:_,MessageBox:y},data(){return{songList:null,language:1,loading:!0,loadingMore:!0,remainingItems:0,diffNames:["EASY","NORMAL","HARD","EXPERT","SPECIAL"],nextId:null,pageCount:0,items:[],message:l().message}},created(){l().setMessage(null),this.fetchData()},methods:{fetchData(){this.loading=!0,m.getSongList().then(o=>{this.songList=o,this.loading=!1,this.loadMore()})},loadMore(){this.loadingMore=!0,m.getTierList(this.nextId).then(o=>{if(o.success)o.data.songs.forEach(a=>{this.items.push({songId:a.song_id,difficultyId:a.difficulty,globalRating:a.global_rating,myRating:a.my_rating}),this.nextId=a.id}),this.pageCount++,this.loadingMore=!1,this.remainingItems=o.data.paging.totalItem-this.pageCount*o.data.paging.itemPerPage;else{l().setMessage(o.errors),this.$router.push("/");return}})}}},M={class:"container px-4 py-6 mx-auto"},k={key:1,class:"max-w-4xl mx-auto bg-slate-800 py-4 px-8 rounded space-y-4"},R=s("div",{class:"text-center text-2xl font-semibold"},"Song List",-1),B={class:"table border-collapse text-center mx-auto border border-slate-500"},v=s("thead",{class:"bg-slate-600"},[s("tr",null,[s("th",{scope:"col",class:"px-4 py-2 text-left"},"Rank"),s("th",{scope:"col",class:"px-4 py-2 text-left w-full"},"Title"),s("th",{scope:"col",class:"px-4 py-2",title:"Official difficulty rating"},"R"),s("th",{scope:"col",class:"px-4 py-2",title:"Global average difficulty rating"},"GR"),s("th",{scope:"col",class:"px-4 py-2",title:"My difficulty rating"},"MR")])],-1);function w(o,a,C,D,t,c){const d=f("MessageBox"),p=f("DiffListItem");return i(),n("div",M,[t.loading?(i(),r(d,{key:0,message:"Loading song data...",class:"max-w-2xl mx-auto"},null,8,["message"])):g("",!0),t.loading?g("",!0):(i(),n("div",k,[R,s("table",B,[v,s("tbody",null,[(i(!0),n(u,null,h(t.items,(e,x)=>(i(),r(p,{songTitle:t.songList[e.songId].title[t.language]||t.songList[e.songId].title[0],songId:e.songId,difficultyLevel:t.songList[e.songId].difficulties[e.difficultyId],difficultyId:e.difficultyId,globalRating:e.globalRating,myRating:e.myRating,rank:x+1},null,8,["songTitle","songId","difficultyLevel","difficultyId","globalRating","myRating","rank"]))),256))])]),t.loadingMore?(i(),r(d,{key:0,message:"Loading data...",class:"max-w-xl mx-auto"},null,8,["message"])):(i(),n(u,{key:1},[t.remainingItems>0?(i(),n("button",{key:0,onClick:a[0]||(a[0]=(...e)=>c.loadMore&&c.loadMore(...e)),class:"block w-full max-w-xl mx-auto px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 border border-slate-500 focus:ring-sky-500 focus:ring-1"},"Load more ("+I(t.remainingItems)+")",1)):g("",!0)],64))]))])}var N=b(L,[["render",w]]);export{N as default};
